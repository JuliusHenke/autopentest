import logging

from langchain_core.pydantic_v1 import Field

from tools.base_shell import BaseShell, get_default_bash_process, get_platform
from tools.bash_process import BashProcess

logger = logging.getLogger(__name__)


class TemporaryShell(BaseShell):
    """Tool to run one time shell/bash commands in"""

    process: BashProcess = Field(default_factory=lambda: get_default_bash_process(False))
    """Bash process to run commands."""

    name: str = "temporary_shell"
    """Name of tool."""

    description: str = f"Run bash commands on this {get_platform()} machine in a temporary shell. Use a realistic timeout to mitigate indefinite blocking."
    """Description of tool."""
